#
# Copyright (c) 2013, Opscode, Inc.
# All rights reserved.
#

.include "${SRCTOP}/lib/ruby/Makefile.inc"

LIB = <%= name %>
SHLIB_NAME = ${LIB}.so

EXT_DIR = ${SRCTOP}/<%= source_path %>

.PATH: ${EXT_DIR}
SRCS = <%= sources.join(" ") %>

CFLAGS += \
  -I${EXT_DIR}
  -DHAVE_RUBY_RE_H=1
  -DHAVE_RUBY_ENCODING_H=1

DPLIBS += \
  ${LIBTHR} \
  ${LIBM}

SHLIB_LDFLAGS.${MACHINE} += \
  -rdynamic -Wl,-rpath=${JUNOS_SDK_INSTALLDIR}/lib

.include <bsd.lib.mk>
